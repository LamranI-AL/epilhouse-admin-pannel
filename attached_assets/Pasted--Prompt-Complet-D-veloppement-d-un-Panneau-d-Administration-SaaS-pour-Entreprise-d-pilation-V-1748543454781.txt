# Prompt Complet : DÃ©veloppement d'un Panneau d'Administration SaaS pour Entreprise d'Ã‰pilation

Vous Ãªtes un dÃ©veloppeur Full-Stack expert spÃ©cialisÃ© dans la crÃ©ation d'applications SaaS modernes. Votre mission est de dÃ©velopper un panneau d'administration complet pour une entreprise d'Ã©pilation avec un rÃ©seau de centres.

## ğŸ¯ Objectif Principal
CrÃ©er un systÃ¨me de gestion multi-centres robuste, Ã©volutif et convivial permettant la gestion complÃ¨te des rÃ©servations, clients, agents et opÃ©rations commerciales d'une entreprise d'Ã©pilation.

## ğŸ› ï¸ Stack Technologique ImposÃ©e

### Frontend
- **Next.js 15** avec App Router (routing basÃ© sur les dossiers)
- **TypeScript** pour la sÃ©curitÃ© de types
- **Shadcn/UI** pour les composants d'interface
- **Tailwind CSS** pour le styling
- **Zustand** pour la gestion d'Ã©tat globale
- **React Hook Form** + **Zod** pour la validation des formulaires

### Backend & Base de DonnÃ©es
- **Firebase Suite complÃ¨te** :
  - Authentication (gestion des utilisateurs et rÃ´les)
  - Firestore (base de donnÃ©es NoSQL)
  - Storage (stockage des fichiers)
  - Functions (logique serveur)

## ğŸ—ï¸ Architecture du SystÃ¨me

### ModÃ¨le de DonnÃ©es
Le systÃ¨me repose sur une hiÃ©rarchie : Entreprise â†’ Locations â†’ Agents â†’ Services â†’ RÃ©servations

**Collections Firestore principales :**
```
/locations (centres d'Ã©pilation)
/agents (employÃ©s liÃ©s Ã  des locations)
/services (prestations d'Ã©pilation)
/bookings (rÃ©servations/rendez-vous)
/clients (base clients)
/orders (commandes/transactions)
/payments (paiements)
/coupons (codes promotionnels)
/settings (configuration systÃ¨me)
```

### SystÃ¨me de Permissions
- **Admin** : AccÃ¨s total, gestion multi-centres
- **Agent** : AccÃ¨s limitÃ© Ã  leur location assignÃ©e uniquement

## ğŸ“‹ FonctionnalitÃ©s DÃ©taillÃ©es Ã  ImplÃ©menter

### 1. Dashboard Principal (Page d'accueil)
**InspirÃ© de la premiÃ¨re image fournie**

```typescript
// MÃ©triques en temps rÃ©el Ã  afficher
interface DashboardMetrics {
  totalBookings: number
  revenue: number
  workingHours: number
  newCustomers: number
  bookingTrend: Array<{date: string, count: number}>
}
```

**Composants requis :**
- Cartes de statistiques avec icÃ´nes et pourcentages d'Ã©volution
- Graphique linÃ©aire des performances (utilisez Recharts)
- Section "Prochains rendez-vous" (3 prochains RDV)
- "Day Preview" avec vue calendaire du jour sÃ©lectionnÃ©
- Filtres par location et service

### 2. Calendrier Interactif
**InspirÃ© de la deuxiÃ¨me image (vue hebdomadaire colorÃ©e)**

**FonctionnalitÃ©s clÃ©s :**
- Vue semaine/mois/jour
- CrÃ©neaux colorÃ©s par type de service (1 Zone, 2 Zones, 3 Zones, etc.)
- Indication "FULL" pour les crÃ©neaux complets
- Drag & Drop pour dÃ©placer les rendez-vous
- Filtres par agent et location
- Modal de dÃ©tails au clic sur un crÃ©neau

**Structure de donnÃ©es des crÃ©neaux :**
```typescript
interface TimeSlot {
  id: string
  startTime: Date
  endTime: Date
  serviceType: string
  agentId: string
  locationId: string
  clientName: string
  status: 'confirmed' | 'pending' | 'completed' | 'cancelled'
  color: string
}
```

### 3. Gestion des Rendez-vous
**Table avancÃ©e avec DataTable Shadcn/UI**

**Colonnes requises :**
- IDENTIFIANT (ID unique)
- SERVICE (type d'Ã©pilation)
- DATE/HEURE
- TIME LEFT (temps restant)
- AGENT (nom de l'agent assignÃ©)
- CLIENT (informations client)
- LOCATION (centre)

**FonctionnalitÃ©s :**
- Recherche en temps rÃ©el
- Filtres multiples (service, date, agent, statut)
- Export CSV
- Actions CRUD complÃ¨tes
- Pagination avancÃ©e

### 4. Gestion des Commandes/Orders
**Table transactionnelle**

**DonnÃ©es Ã  gÃ©rer :**
```typescript
interface Order {
  id: string
  clientId: string
  clientName: string
  total: number
  status: 'open' | 'closed' | 'pending'
  paymentStatus: 'paid' | 'not_paid' | 'partial'
  fulfillmentStatus: 'fulfilled' | 'not_fulfilled' | 'partial'
  confirmationCode: string
  createdAt: Date
}
```

### 5. Base de DonnÃ©es Clients
**CRM simplifiÃ©**

**Informations client :**
- Identifiant unique
- Nom et prÃ©nom
- TÃ©lÃ©phone et email
- Nombre total de rÃ©servations
- Prochaine rÃ©servation
- Historique des services

### 6. Gestion des Services
**Interface par onglets : Services | Bundles | CatÃ©gories | Service Extras**

**Structure des services :**
```typescript
interface Service {
  id: string
  name: string // "1 Zone", "2 Zones", "3 Zones", "4 Zones", "5 Zones", "FULL BODY"
  duration: number // en minutes
  price: number
  capacity: number
  availableAgents: string[]
  category: 'FEMMES' | 'HOMMES'
  tampon: number // temps de pause entre services
  isActive: boolean
}
```

**Interface visuelle :**
- Cartes de service avec durÃ©e, prix, capacitÃ©
- Boutons d'Ã©dition sur chaque carte
- SystÃ¨me d'ajout de nouveaux services
- Gestion des agents assignÃ©s par service

### 7. Gestion des Agents
**Vue en cartes avec disponibilitÃ©s**

**DonnÃ©es agent :**
```typescript
interface Agent {
  id: string
  name: string
  phone: string
  email: string
  locationIds: string[] // centres assignÃ©s
  workingDays: string[] // jours de travail
  workingHours: {start: string, end: string}
  role: 'admin' | 'agent'
  isOnLeave: boolean
  leaveStartDate?: Date
  leaveEndDate?: Date
  totalBookings: number
  status: 'active' | 'on_leave' | 'inactive'
}
```

**Interface :**
- Cartes agent avec photo de profil
- Indicateurs de disponibilitÃ© (couleurs : vert = disponible, rouge = en congÃ©)
- Calendrier de disponibilitÃ© hebdomadaire
- Nombre de rÃ©servations actuel

### 8. Gestion des Locations
**Vue carte avec intÃ©gration Google Maps**

**DonnÃ©es location :**
```typescript
interface Location {
  id: string
  name: string
  address: string
  city: string
  postalCode: string
  country: string
  coordinates: {lat: number, lng: number}
  phone: string
  email: string
  workingHours: Record<string, {start: string, end: string}>
  assignedAgents: string[]
  category: string
}
```

**Interface :**
- Cartes Google Maps interactives
- DÃ©tails de contact
- Liste des agents assignÃ©s
- Gestion des catÃ©gories de centres

### 9. SystÃ¨me de Coupons
```typescript
interface Coupon {
  id: string
  code: string
  type: 'percentage' | 'fixed_amount'
  value: number
  applicableServices: string[]
  validFrom: Date
  validUntil: Date
  usageLimit: number
  usedCount: number
  isActive: boolean
}
```

### 10. Gestion des Paiements
**Suivi financier complet**
- Statuts de paiement
- MÃ©thodes de paiement
- Rapports financiers
- Paiements partiels

## ğŸ¨ Directives UI/UX

### Design System
- **Palette de couleurs** : Reprendre les couleurs des images (bleu principal, cartes colorÃ©es pour services)
- **Typographie** : Police moderne et lisible
- **Espacement** : Utiliser le systÃ¨me Tailwind (4, 6, 8, 12, 16, 24)
- **Responsive** : Mobile-first design

### Composants Shadcn/UI Ã  utiliser prioritairement
- `DataTable` pour toutes les listes
- `Card` pour les mÃ©triques et informations
- `Calendar` pour les sÃ©lecteurs de date
- `Dialog` pour les modales
- `Form` avec validation Zod
- `Select`, `Input`, `Button`
- `Badge` pour les statuts
- `Tabs` pour la navigation par sections

### Navigation
```
Sidebar principal :
â”œâ”€â”€ ğŸ“Š Tableau de bord
â”œâ”€â”€ ğŸ“… Calendrier  
â”œâ”€â”€ ğŸ“ Rendez-vous
â”œâ”€â”€ ğŸ›’ Orders
â”œâ”€â”€ ğŸ’³ Paiements
â”œâ”€â”€ ğŸ‘¥ Clients
â”œâ”€â”€ RESOURCES
â”œâ”€â”€ âš™ï¸ Services
â”œâ”€â”€ ğŸ‘¨â€ğŸ’¼ Agents
â”œâ”€â”€ ğŸ“ Locations
â”œâ”€â”€ ğŸ« Coupons
â”œâ”€â”€ PARAMÃˆTRES
â”œâ”€â”€ âš™ï¸ ParamÃ¨tres
â”œâ”€â”€ ğŸ¤– Automation
â”œâ”€â”€ ğŸ”— Integrations
â”œâ”€â”€ ğŸ“‹ Form Fields
â””â”€â”€ ğŸ§© Add-ons
```

## ğŸ”§ Configuration Technique DÃ©taillÃ©e

### Structure des Dossiers Next.js
```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ (dashboard)/
â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”œâ”€â”€ calendar/
â”‚   â”‚   â”œâ”€â”€ bookings/
â”‚   â”‚   â”œâ”€â”€ orders/
â”‚   â”‚   â”œâ”€â”€ payments/
â”‚   â”‚   â”œâ”€â”€ clients/
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”œâ”€â”€ locations/
â”‚   â”‚   â””â”€â”€ coupons/
â”‚   â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ api/
â”‚   â””â”€â”€ globals.css
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/ (Shadcn components)
â”‚   â”œâ”€â”€ dashboard/
â”‚   â”œâ”€â”€ forms/
â”‚   â””â”€â”€ layout/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ firebase.ts
â”‚   â”œâ”€â”€ stores/ (Zustand stores)
â”‚   â”œâ”€â”€ utils.ts
â”‚   â””â”€â”€ validations/ (Zod schemas)
â”œâ”€â”€ hooks/
â””â”€â”€ types/
```

### Configuration Firebase
```javascript
// lib/firebase.ts
// Configuration complÃ¨te avec rÃ¨gles de sÃ©curitÃ© Firestore
// Initialisation Authentication avec Custom Claims
// Configuration Storage pour images
```

### Stores Zustand Requis
```typescript
// lib/stores/authStore.ts
// lib/stores/bookingStore.ts  
// lib/stores/clientStore.ts
// lib/stores/locationStore.ts
// lib/stores/serviceStore.ts
// lib/stores/agentStore.ts
```

### SchÃ©mas de Validation Zod
CrÃ©er des schÃ©mas pour toutes les entitÃ©s avec validation complÃ¨te.

## ğŸ” SÃ©curitÃ© & Permissions

### RÃ¨gles Firestore
```javascript
// RÃ¨gles strictes par rÃ´le
// Agents : accÃ¨s limitÃ© Ã  leur location
// Admins : accÃ¨s complet
// Validation des donnÃ©es cÃ´tÃ© serveur
```

### Authentication Firebase
- Custom Claims pour les rÃ´les
- Middleware de protection des routes
- Gestion des sessions

## ğŸ“± Responsiveness
- Design adaptatif desktop/tablette
- Navigation mobile optimisÃ©e
- Tables scrollables horizontalement
- Modales adaptÃ©es aux petits Ã©crans

## ğŸš€ Performance
- Lazy loading des composants
- Pagination des listes
- Cache des requÃªtes Firebase
- Optimisation des images
- Code splitting par route

## ğŸ“Š FonctionnalitÃ©s AvancÃ©es Ã  ImplÃ©menter

### Notifications en Temps RÃ©el
- Rappels de rendez-vous
- Notifications de nouveaux bookings
- Alertes systÃ¨me

### Export/Import de DonnÃ©es
- Export CSV de toutes les listes
- Import en masse de clients
- Sauvegarde de donnÃ©es

### Rapports et Analytics
- Graphiques de performance
- Rapports financiers
- Statistiques par agent/location

## ğŸ¯ Livrables Attendus

1. **Application Next.js 15 complÃ¨te** avec toutes les fonctionnalitÃ©s
2. **Base de donnÃ©es Firebase** structurÃ©e et sÃ©curisÃ©e
3. **Interface utilisateur** pixel-perfect selon les mockups
4. **Documentation technique** complÃ¨te
5. **Guide de dÃ©ploiement** et configuration
6. **Tests unitaires** des composants critiques

## ğŸ“ Standards de Code
- TypeScript strict mode
- ESLint + Prettier configuration
- Nomenclature cohÃ©rente
- Commentaires JSDoc
- Architecture modulaire
- Gestion d'erreurs robuste

---

**Important :** Respectez scrupuleusement les mockups fournis pour l'interface utilisateur. L'application doit Ãªtre production-ready avec une attention particuliÃ¨re Ã  l'expÃ©rience utilisateur, la performance et la sÃ©curitÃ© des donnÃ©es.